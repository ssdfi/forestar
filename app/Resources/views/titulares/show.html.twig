{% extends 'base.html.twig' %}
{% block title %}{{parent()}} - Titulares{% endblock %}
{% block navbarRight %}
<li class="nav-item active">
  <a class="nav-link" href="{{path('titulares_edit', {'id': titulare.id})}}"><span class="fa fa-edit" aria-hidden="true"></span> Editar Titular</a>
</li>
{{parent()}}
{% endblock %}
{% block body %}
    <div class="col-md-12">
      <div class="row">
      <div class="col-md-4">
        <div class="card border-info">
          <div class="card-header bg-info text-white">
            Titular
          </div>
          <div class="card-body">
            <dl class="row">
              {% if titulare.personeria == 'Física' %}
                <dt class="col-4">Id</dt>
                <dd class="col-8">{{ titulare.id }}</dd>
                <dt class="col-4">Apellido y Nombre</dt>
                <dd class="col-8">{{ titulare.apellidoNombre }}</dd>
                <dt class="col-4">CUIT/CUIL</dt>
                <dd class="col-8">{{ titulare.cuit }}</dd>
                <dt class="col-4">Tipo Documento</dt>
                <dd class="col-8">{{ titulare.tipoDocumento }}</dd>
                <dt class="col-4">Documento</dt>
                <dd class="col-8">{{ titulare.documento }}</dd>
                <dt class="col-4">Fecha de Nacimiento</dt>
                <dd class="col-8">{% if titulare.fechaNacimiento %}{{ titulare.fechaNacimiento|date('d-m-Y') }}{% endif %}</dd>
                <dt class="col-4">Sexo</dt>
                <dd class="col-8">{{ titulare.sexo }}</dd>
                <dt class="col-4">Email/s</dt>
                <dd class="col-8">{{ titulare.emails|join(' | ')|lower }}</dd>
                <dt class="col-4">Teléfono/s</dt>
                <dd class="col-8">{{ titulare.telefonos|join(' | ') }}</dd>
                <dt class="col-4">Domicilio/s</dt>
                <dd class="col-8">{{ titulare.domicilios|join(' | ') }}</dd>
                <dt class="col-4">Pequeño Productor</dt>
                <dd class="col-8">{% if titulare.pequenioProductor %}<span class="fa fa-check"></span>{% else %}<span class="fa fa-times"></span>{% endif %}</dd>
                <dt class="col-4">Aprobado</dt>
                <dd class="col-8">{% if titulare.aprobado %}<span class="fa fa-check"></span>{% else %}<span class="fa fa-times"></span>{% endif %}</dd>
                <dt class="col-4">Número de Registro</dt>
                <dd class="col-8">{{ titulare.numeroRegistro }}</dd>
                <dt class="col-4">Condicional</dt>
                <dd class="col-8">{% if titulare.condicional %}<span class="fa fa-check"></span>{% else %}<span class="fa fa-times"></span>{% endif %}</dd>
                {% if titulare.agriculturaFamiliar %}
                  <dt class="col-4">Nro. RENAF</dt>
                  <dd class="col-8">{{titulare.nroRenaf}}</dd>
                {% endif %}
              {% else %}
                <!-- juridica -->
                <dt class="col-4">Id</dt>
                <dd class="col-8">{{ titulare.id }}</dd>
                <dt class="col-4">Razón Social</dt>
                <dd class="col-8">{{ titulare.apellidoNombre }}</dd>
                <dt class="col-4">Entidad Agrupante</dt>
                <dd class="col-8">{% if titulare.agrupador %}<span class="fa fa-check"></span>{% else %}<span class="fa fa-times"></span>{% endif %}</dd>
                <dt class="col-4">Comunidad Indígena</dt>
                <dd class="col-8">{% if titulare.comunidadIndigena %}<span class="fa fa-check"></span>{% else %}<span class="fa fa-times"></span>{% endif %}</dd>
                {% if titulare.comunidadIndigena %}
                  <dt class="col-4">Tipo</dt>
                  <dd class="col-8">{{titulare.tipoComunidadIndigena}}</dd>
                  <dt class="col-4">Número</dt>
                  <dd class="col-8">{{titulare.renaciRenoaf}}</dd>
                {% endif %}
                <dt class="col-4">CUIT</dt>
                <dd class="col-8">{{ titulare.cuit }}</dd>
                <dt class="col-4">Email/s</dt>
                <dd class="col-8">{{ titulare.emails|join(' | ')|lower }}</dd>
                <dt class="col-4">Teléfono/s</dt>
                <dd class="col-8">{{ titulare.telefonos|join(' | ') }}</dd>
                <dt class="col-4">Domicilio/s</dt>
                <dd class="col-8">{{ titulare.domicilios|join(' | ') }}</dd>
                <dt class="col-4">Pequeño Productor</dt>
                <dd class="col-8">{% if titulare.pequenioProductor %}<span class="fa fa-check"></span>{% else %}<span class="fa fa-times"></span>{% endif %}</dd>
                <dt class="col-4">Aprobado</dt>
                <dd class="col-8">{% if titulare.aprobado %}<span class="fa fa-check"></span>{% else %}<span class="fa fa-times"></span>{% endif %}</dd>
                <dt class="col-4">Número de Registro</dt>
                <dd class="col-8">{{ titulare.numeroRegistro }}</dd>
                <dt class="col-4">Condicional</dt>
                <dd class="col-8">{% if titulare.condicional %}<span class="fa fa-check"></span>{% else %}<span class="fa fa-times"></span>{% endif %}</dd>
                <dt class="col-4">Presidente</dt>
                <dd class="col-8">{{ titulare.presidente }}</dd>
                <dt class="col-4">Vicepresidente</dt>
                <dd class="col-8">{{ titulare.vicepresidente }}</dd>
                <dt class="col-4">Director Titular</dt>
                <dd class="col-8">{{ titulare.directorTitular }}</dd>
                <dt class="col-4">Director Suplente</dt>
                <dd class="col-8">{{ titulare.directorSuplente }}</dd>
                <dt class="col-4">Duración de Cargos</dt>
                <dd class="col-8">{{ titulare.duracionCargos }}</dd>
                <dt class="col-4">Número de Registro</dt>
                <dd class="col-8">{{ titulare.apoderados }}</dd>
                <dt class="col-4">Copia DNI presentada</dt>
                <dd class="col-8">{% if titulare.copiaDniPresentada %}<span class="fa fa-check"></span>{% else %}<span class="fa fa-times"></span>{% endif %}</dd>
              {% endif %}
              {% if titulare.createdAt %}
                <dt class="col-4">Fecha Creación</dt>
                <dd class="col-8">{{titulare.createdAt|date('d-m-Y')}}</dd>
                <dt class="col-4">Creado Por:</dt>
                <dd class="col-8">{{titulare.createdBy}}</dd>
              {% endif %}
              {% if titulare.updatedAt %}
                <dt class="col-4">Fecha Actualización</dt>
                <dd class="col-8">{{titulare.updatedAt|date('d-m-Y')}}</dd>
                <dt class="col-4">Actualizado Por:</dt>
                <dd class="col-8">{{titulare.updatedBy}}</dd>
              {% endif %}
            </dl>
          </div>
        </div>
      </div>
      <div class="col-md-8">
        <h5>Expedientes asociados al titular</h5>
        {% if expedientes is defined %}
        <table class="table">
          <thead>
            <tr>
              <th scope="col"{% if expedientes.isSorted('e.id') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(expedientes, 'ID', 'e.id') }}
                {% if expedientes.isSorted('e.id') %}
                  {% if expedientes.direction() == 'asc' %}<span class="fa fa-angle-up"></span>{% else %}<span class="fa fa-angle-down"></span>{% endif %}
                {% endif %}
              </th>
              <th scope="col"{% if expedientes.isSorted('e.numeroInterno') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(expedientes, 'Número Interno', 'e.numeroInterno') }}
                {% if expedientes.isSorted('e.numeroInterno') %}
                  {% if expedientes.direction() == 'asc' %}<span class="fa fa-angle-up"></span>{% else %}<span class="fa fa-angle-down"></span>{% endif %}
                {% endif %}
              </th>
              <th scope="col"{% if expedientes.isSorted('e.numeroExpediente') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(expedientes, 'Número Expediente', 'e.numeroExpediente') }}
                {% if expedientes.isSorted('e.numeroExpediente') %}
                    {% if expedientes.direction() == 'asc' %}<span class="fa fa-angle-up"></span>{% else %}<span class="fa fa-angle-down"></span>{% endif %}
                {% endif %}
              </th>
              <th scope="col">Representante Legal</th>
              <th scope="col">Profesional a Cargo</th>
              <th scope="col"{% if expedientes.isSorted('e.fechaPresentacion') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(expedientes, 'Fecha Presentación', 'e.fechaPresentacion') }}
                {% if expedientes.isSorted('e.fechaPresentacion') %}
                    {% if expedientes.direction() == 'asc' %}<span class="fa fa-angle-up"></span>{% else %}<span class="fa fa-angle-down"></span>{% endif %}
                {% endif %}
              </th>
              <th scope="col"{% if expedientes.isSorted('e.fechaIngreso') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(expedientes, 'Fecha Ingreso', 'e.fechaIngreso') }}
                {% if expedientes.isSorted('e.fechaIngreso') %}
                    {% if expedientes.direction() == 'asc' %}<span class="fa fa-angle-up"></span>{% else %}<span class="fa fa-angle-down"></span>{% endif %}
                {% endif %}
              </th>

            </tr>
          </thead>
          <tbody>
            {% for expediente in expedientes %}
            <tr data-link="{{ path('expedientes_show', { 'id': expediente.id }) }}">
              <td><a href="{{ path('expedientes_show', { 'id': expediente.id }) }}">{{ expediente.id }}</a></td>
              <td>{{ expediente.numeroInterno }}</td>
              <td>{{ expediente.numeroExpediente }}</td>
              <td>{{ expediente.representanteLegal }}</td>
              <td><abbr title="{{ expediente.profesionalCargo }}" data-length="10">{{ expediente.profesionalCargo }}</abbr></td>
              <td>{% if expediente.fechaPresentacion %}{{ expediente.fechaPresentacion|date('Y-m-d') }}{% endif %}</td>
              <td>{% if expediente.fechaIngreso %}{{ expediente.fechaIngreso|date('Y-m-d') }}{% endif %}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        {% endif %}
        {% if titulare.actividadesTitulares|length > 0 %}
           <h5>Expedientes agrupados al titular</h5>
           <table class="table">
             <thead>
               <tr>
                 <th scope="col">Id</th>
                 <th scope="col">Numero Interno</th>
                 <th scope="col">Numero Expediente</th>
                 <th scope="col">Representante Legal</th>
                 <th scope="col">Profesional a Cargo</th>
                 <th scope="col">Fecha Presentacion</th>
                 <th scope="col">Fecha Ingreso</th>
               </tr>
             </thead>
             <tbody>
               {% for item in titulare.actividadesTitulares %}
                 {% if item.expediente.id is defined %}
                   <tr data-link="{{ path('expedientes_show', { 'id': item.expediente.id }) }}">
                     <td><a href="{{ path('expedientes_show', { 'id': item.expediente.id }) }}">{{ item.expediente.id }}</a></td>
                     <td>{{ item.expediente.numeroInterno }}</td>
                     <td>{{ item.expediente.numeroExpediente }}</td>
                     <td>{{ item.expediente.representanteLegal }}</td>
                     <td><abbr title="{{ item.expediente.profesionalCargo }}" data-length="10">{{ item.expediente.profesionalCargo }}</abbr></td>
                     <td>{% if item.expediente.fechaPresentacion %}{{ item.expediente.fechaPresentacion|date('Y-m-d') }}{% endif %}</td>
                     <td>{% if item.expediente.fechaIngreso %}{{ item.expediente.fechaIngreso|date('Y-m-d') }}{% endif %}</td>
                   </tr>
                 {% endif %}
               {% endfor %}
             </tbody>
           </table>
        {% endif %}
      </div>
    </div>
      </div>
    </div>
{% endblock %}
