{% extends 'base.html.twig' %}

{% block title %}{{parent()}} - {{expediente.numeroExpediente}}{% endblock %}
{% block navbarRight %}
<li class="nav-item active">
  <a class="nav-link" href="{{path('expedientes_edit', {'id': expediente.id})}}"><span class="fa fa-edit" aria-hidden="true"></span> Editar Expediente</a>
</li>
{{parent()}}
{% endblock %}
{% block body %}
    <div class="col-md-12">
      <div class="row">
        <div class="col-md-12 text-white">
          <nav>
            <div class="nav nav-pills nav-fill text-white bg-light border" id="nav-tab" role="tablist">
              <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-presentacion" role="tab" aria-controls="nav-home" aria-selected="true">Presentación ({{expediente.actividadesPresentadas|length}})</a>
              <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-certificacion" role="tab" aria-controls="nav-profile" aria-selected="false">Certificación ({{expediente.ActividadesCertificadas|length}})</a>
              <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-inspeccion" role="tab" aria-controls="nav-contact" aria-selected="false">Inspección ({{expediente.actividadesInspeccionadas|length}})</a>
              <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-sig" role="tab" aria-controls="nav-sig" aria-selected="false">SIG ({{expediente.actividadesSig|length}})</a>
              <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-documentacion" role="tab" aria-controls="nav-contact" aria-selected="false">Documentación ({{expediente.documentacion|length}})</a>
              <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-situacion" role="tab" aria-controls="nav-contact" aria-selected="false">Estado Situación ({{expediente.estadoSituacion|length}})</a>
              {% if expediente.ActividadesTitulares|length %}
                <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-titulares" role="tab" aria-controls="nav-contact" aria-selected="false">Productores Asociados ({{expediente.actividadesTitulares|length}})</a>
              {% endif %}
              <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-beneficios-fiscales" role="tab" aria-controls="nav-contact" aria-selected="false">Beneficios Fiscales ({{expediente.beneficiosFiscales|length}})</a>
              <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-predios" role="tab" aria-controls="nav-contact" aria-selected="false">Predios ({{expediente.predios|length}})</a>
              <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-disposiciones-provinciales" role="tab" aria-controls="nav-contact" aria-selected="false">Disposiciones Prov. ({{expediente.disposicionesProvinciales|length}})</a>
              <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-impacto-ambiental" role="tab" aria-controls="nav-contact" aria-selected="false">Impacto Ambiental ({{expediente.impactosAmbientales|length}})</a>
              <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-declaracion-iva-resoluciones" role="tab" aria-controls="nav-contact" aria-selected="false">IVA por resolución({{expediente.declaracionIvaResoluciones|length}})</a>
              <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-documentos-legales" role="tab" aria-controls="nav-contact" aria-selected="false">Documentos Legales</a>
              <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-resoluciones" role="tab" aria-controls="nav-contact" aria-selected="false">Resoluciones ({{expediente.resoluciones|length}})</a>
              <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-producciones-volumetricas" role="tab" aria-controls="nav-contact" aria-selected="false">Producciones Volumétricas ({{expediente.produccionesVolumetricas|length}})</a>
              <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-observaciones" role="tab" aria-controls="nav-contact" aria-selected="false">Observaciones</a>
            </div>
          </nav>
        </div>
      </div>
      <div class="row">
        <div class="col-md-3">
          <div class="card border-info">
            <div class="card-header bg-info text-white">
              Expediente
            </div>
            <div class="card-body">
              <dl class="row">
                <dt class="col-6">ID</dt>
                <dd class="col-6">{{ expediente.id }}</dd>
                <dt class="col-6">Numero Interno</dt>
                <dd class="col-6">{{ expediente.numeroInterno }}</dd>
                <dt class="col-6">Numero Expediente</dt>
                <dd class="col-6">{{ expediente.numeroExpediente }}</dd>
                <dt class="col-6">Titulares</dt>
                <dd class="col-6">
                  {% for titular in expediente.titulares %}
                      <a href="{{path('titulares_show', { 'id': expediente.titular.id })}}">{{titular}}</a>{% if loop.last == false %} | {% endif %}
                  {% endfor %}</dd>
                <dt class="col-6">Entidad Agrupadora</dt>
                <dd class="col-6"><a href="#">{{ expediente.entidadAgrupadoraId }}</a></dd>
                <dt class="col-6">Representante Legal</dt>
                <dd class="col-6">{{ expediente.representanteLegal }}</dd>
                <dt class="col-6">Profesional Cargo</dt>
                <dd class="col-6">{{ expediente.profesionalCargo }}</dd>
                <dt class="col-6">Fecha Presentacion</dt>
                <dd class="col-6">{% if expediente.fechaPresentacion %}{{ expediente.fechaPresentacion|date('d-m-Y') }}{% endif %}</dd>
                <dt class="col-6">Fecha Ingreso</dt>
                <dd class="col-6">{% if expediente.fechaIngreso %}{{ expediente.fechaIngreso|date('d-m-Y') }}{% endif %}</dd>
                <dt class="col-6">Fecha Fin</dt>
                <dd class="col-6">{% if expediente.fechaFin %}{{ expediente.fechaFin|date('d-m-Y') }}{% endif %}</dd>
                <dt class="col-6">Estado</dt>
                <dd class="col-6">{{ expediente.estado }}</dd>
                <dt class="col-6">Estado Área Contable</dt>
                <dd class="col-6">{{ expediente.estadoAreaContable }}</dd>
                <dt class="col-6">Estado Área Legales</dt>
                <dd class="col-6">{{ expediente.estadoAreaLegales }}</dd>
                <dt class="col-6">Estado Área Promocion</dt>
                <dd class="col-6">{{ expediente.estadoAreaPromocion }}</dd>
                <dt class="col-6">Estado Área SIG</dt>
                <dd class="col-6">{{ expediente.estadoAreaSig }}</dd>
                <dt class="col-6">Estado Foresto Industrial</dt>
                <dd class="col-6">{{ expediente.estadoForestoIndustriales }}</dd>
                <dt class="col-6">Área donde se encuentra Expediente</dt>
                <dd class="col-6">{{ expediente.areaEncuentraExpediente }}</dd>
                <dt class="col-6">Departamento</dt>
                <dd class="col-6">{{ expediente.departamento }}</dd>
                <dt class="col-6">Año del expediente</dt>
                <dd class="col-6">{{ expediente.anio }}</dd>
                <dt class="col-6">Creado</dt>
                <dd class="col-6">{% if expediente.createdAt %}{{ expediente.createdAt|date('d-m-Y') }}{% endif %}</dd>
                {% if expediente.informacionBudaf %}
                  <dt class="col-6">Información BUDAF</dt>
                  <dd class="col-6">{{ expediente.informacionBudaf|nl2br }}</dd>
                {% endif %}
                {% if expediente.budafId %}
                  <dt class="col-6">ID Budaf</dt>
                  <dd class="col-6">{{ expediente.budafId }}</dd>
                {% endif %}
              </dl>
            </div>
          </div>
        </div>
        <div class="col-md-9">
          <div class="tab-content" id="nav-tabContent">
            <div class="tab-pane fade show active" id="nav-presentacion" role="tabpanel" aria-labelledby="nav-home-tab">
              {% embed "actividadespresentadas/show_table.html.twig" with { 'actividadesPresentadas': expediente.actividadesPresentadas} %}
              {% endembed %}
            </div>
            <div class="tab-pane fade" id="nav-certificacion" role="tabpanel" aria-labelledby="nav-profile-tab">
              {% embed "actividadescertificadas/show_table.html.twig" with { 'actividadesCertificadas': expediente.actividadesCertificadas} %}
              {% endembed %}
            </div>
            <div class="tab-pane fade" id="nav-inspeccion" role="tabpanel" aria-labelledby="nav-contact-tab">
              {% embed "actividadesinspeccionadas/show_table.html.twig" with { 'actividadesInspeccionadas': expediente.actividadesInspeccionadas} %}
              {% endembed %}
            </div>
            <div class="tab-pane fade" id="nav-sig" role="tabpanel" aria-labelledby="nav-sig-tab">
              {% embed "actividadessig/show_table.html.twig" with { 'actividadesSig': expediente.actividadesSig} %}
              {% endembed %}
            </div>
            <div class="tab-pane fade" id="nav-documentacion" role="tabpanel" aria-labelledby="nav-contact-tab">
              {% embed "documentacion/show_table.html.twig" with { 'documentacion': expediente.documentacion} %}
              {% endembed %}
            </div>
            <div class="tab-pane fade" id="nav-situacion" role="tabpanel" aria-labelledby="nav-contact-tab">
              {% embed "estado_situacion/show_table.html.twig" with { 'estadoSituacion': expediente.estadoSituacion} %}
              {% endembed %}
            </div>
            {% if expediente.actividadesTitulares|length %}
              <div class="tab-pane fade" id="nav-titulares" role="tabpanel" aria-labelledby="nav-contact-tab">
                {% embed "estado_situacion/show_table.html.twig" with { 'actividadesTitulares': expediente.actividadesTitulares} %}
                {% endembed %}
              </div>
            {% endif %}
            <div class="tab-pane fade" id="nav-beneficios-fiscales" role="tabpanel" aria-labelledby="nav-contact-tab">
              {% embed "beneficios_fiscales/show_table.html.twig" with { 'beneficiosFiscales': expediente.beneficiosFiscales} %}
              {% endembed %}
            </div>
            <div class="tab-pane fade" id="nav-predios" role="tabpanel" aria-labelledby="nav-contact-tab">
              {% embed "predios/index.html.twig" with { 'predios': expediente.predios} %}
              {% endembed %}
            </div>
            <div class="tab-pane fade" id="nav-disposiciones-provinciales" role="tabpanel" aria-labelledby="nav-contact-tab">
              {% embed "disposiciones_provinciales/show_table.html.twig" with { 'disposicionesProvinciales': expediente.disposicionesProvinciales} %}
              {% endembed %}
            </div>
            <div class="tab-pane fade" id="nav-documentos-legales" role="tabpanel" aria-labelledby="nav-contact-tab">
              <table>
                <tr>
                  {% for item in expediente.documentosLegales %}
                    <td>{% if item.documento %}Documento {{loop.index}} <span class="fa fa-download">{% endif %}</td>
                  {% endfor %}
                </table>
              </tr>
            </div>
            <div class="tab-pane fade" id="nav-resoluciones" role="tabpanel" aria-labelledby="nav-contact-tab">
              {% embed "resoluciones/show_table.html.twig" with { 'resoluciones': expediente.resoluciones} %}
              {% endembed %}
            </div>
            <div class="tab-pane fade" id="nav-impacto-ambiental" role="tabpanel" aria-labelledby="nav-contact-tab">
              {% embed "impactos_ambientales/show_table.html.twig" with { 'impactosAmbientales': expediente.impactosAmbientales} %}
              {% endembed %}
            </div>
            <div class="tab-pane fade" id="nav-declaracion-iva-resoluciones" role="tabpanel" aria-labelledby="nav-contact-tab">
              {% embed "declaracion_iva_resoluciones/show_table.html.twig" with { 'declaracionIvaResoluciones': expediente.declaracionIvaResoluciones} %}
              {% endembed %}
            </div>
            <div class="tab-pane fade" id="nav-producciones-volumetricas" role="tabpanel" aria-labelledby="nav-contact-tab">
              {% embed "producciones_volumetricas/show_table.html.twig" with { 'produccionesVolumetricas': expediente.produccionesVolumetricas} %}
              {% endembed %}
            </div>
            <div class="tab-pane fade" id="nav-observaciones" role="tabpanel" aria-labelledby="nav-contact-tab">
              {% embed "observaciones/show_cards.html.twig" with { 'expediente': expediente} %}
              {% endembed %}
            </div>
          </div>
        </div>
    </div>
  </div>
{% endblock %}
